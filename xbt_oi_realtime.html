<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>タイノコウォッチ</title>
    <link rel="icon" type="image/png" href="./icon.png">
    <style>
        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }

        .btn-sticky {
            display: inline-block;
            padding: 0.5em 1em;
            text-decoration: none;
            background: #f7f7f7;
            border-left: solid 6px #ff7c5c;
            color: #ff7c5c;
            font-weight: bold;
            box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.29);
            font-size: 12px;
        }

        .btn-sticky:active {
            box-shadow: inset 0 0 2px rgba(128, 128, 128, 0.1);
            transform: translateY(2px);
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment-with-locales.min.js"></script>
    <script src="./js/Chart.js"></script>

    <!--
        <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@0.7.0"></script>
    -->
    <!--
   <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.1.2/howler.min.js"></script>
    -->
    <!--
     <script src="https://cdnjs.cloudflare.com/ajax/libs/push.js/1.0.9/push.min.js"></script>
     -->

</head>
<body>
<div style="width: 1200px;">
    <!--
    <div style="display: flex;">
        <iframe src="https://lightchart.bitflyer.com/embed?symbol=FX_BTC_JPY&theme=dark"
                style="width:100%;height:220px;margin: 0 auto 0;display:block;" scrolling="no"
                frameborder="no"></iframe>
        <iframe src="https://kuromat.ch/embed?symbol=BITMEX_XBT_USD&theme=dark"
                style="width:100%;height:220px;margin: 0 auto 0;display:block;" scrolling="no"
                frameborder="no"></iframe>
        <iframe src="https://kuromat.ch/embed?symbol=BITFINEX_BTC_USD&theme=dark"
                style="width:100%;height:220px;margin: 0 auto 0;display:block;" scrolling="no"
                frameborder="no"></iframe>
    </div>
    -->
    <!--
        <canvas id="myChart3" width="1000" style=""></canvas>
        <canvas id="myChart1" width="1000" style="margin-top: 8px;"></canvas>
        <canvas id="myChart8" width="1000" style="margin-top: 8px;"></canvas>
        <canvas id="myChart7" width="1000" style="margin-top: 8px;"></canvas>
        <canvas id="myChart2" width="1000" style="margin-top: 8px;"></canvas>
        <canvas id="myChart6" width="1000" style="margin-top: 8px;"></canvas>
        <canvas id="myChart4" width="1000" style="margin-top: 4px;"></canvas>
    -->
    <canvas id="myChart12" width="1000" style="margin-top: 8px;"></canvas>
    <canvas id="myChart14" width="1000" style="margin-top: 8px;"></canvas>
    <canvas id="myChart11" width="1000" style="margin-top: 8px;"></canvas>
    <canvas id="myChart10" width="1000" style="margin-top: 8px;"></canvas>
    <canvas id="myChart13" width="1000" style="margin-top: 8px;"></canvas>
    <canvas id="myChart9" width="1000" style="margin-top: 8px;"></canvas>
    <!--
                 <canvas id="myChart5" width="1000" style="margin-top: 20px;"></canvas>
                 -->
    <div style="margin-top: 8px;">
        <a href="#" class="btn-sticky" onclick="window.addDay=-92;window.drawOtherData();return false;">3ヶ月間</a>
        <a href="#" class="btn-sticky" onclick="window.addDay=-31;window.drawOtherData();return false;">1ヶ月間</a>
        <a href="#" class="btn-sticky" onclick="window.addDay=-15;window.drawChart();return false;">15日間</a>
        <a href="#" class="btn-sticky" onclick="window.addDay=-7;window.drawChart();return false;">7日間</a>
        <a href="#" class="btn-sticky" onclick="window.addDay=-3;window.drawChart();return false;">3日間</a>
        <a href="#" class="btn-sticky" onclick="window.addDay=-1;window.drawChart();return false;">1日間</a>
    </div>

</div>
<script type="text/javascript">
    console.log('Tainoko Watch v0807');const reconnectInterval=10000;window.addDay=-1;let vis=(function(){let stateKey,eventKey,keys={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(stateKey in keys){if(stateKey in document){eventKey=keys[stateKey];break}}return function(c){if(c)document.addEventListener(eventKey,c);return!document[stateKey]}})();let globalDrawUpdate=true;vis(function(){if(vis()){globalDrawUpdate=true}else{globalDrawUpdate=false}});function get_change(data,ret_string){if(data.length===0){if(ret_string){return''}else{return 0}}let now_time=data[data.length-1]['x'];let back_time=now_time-(86400*Math.abs(window.addDay)*1000);let ave_val=0;let ave_cnt=0;for(let i=data.length-1,l=0;i>=l;i--){if(data[i]['x']>=back_time&&data[i]['x']<now_time&&data[i]['y']!==null){ave_val+=data[i]['y'];ave_cnt++}}ave_val=ave_val/ave_cnt;let result=Math.round(((data[data.length-1]['y']-ave_val)/ave_val)*1000)/10;if(ret_string){if(result>0){result='+'+result}result=' ('+result+'%)'}return result}let lastOI={};let lastPrices={};let nowtime=Date.now();let needUpdate={'myChart9':false,'myChart10':false,'myChart11':false,'myChart12':false,'myChart13':false,'myChart14':false};function myDraw(){if(globalDrawUpdate){if(needUpdate.myChart9){myChart9.update()}if(needUpdate.myChart10){myChart10.update()}if(needUpdate.myChart11){myChart11.update()}if(needUpdate.myChart12){myChart12.update()}if(needUpdate.myChart13){myChart13.update()}if(needUpdate.myChart14){myChart14.update()}needUpdate={'myChart9':false,'myChart10':false,'myChart11':false,'myChart12':false,'myChart13':false,'myChart14':false}}}function myRefresh(){nowtime=Date.now()}const connect_mex=function(){let ws_mex=new WebSocket("wss://www.bitmex.com/realtime");let msg_mex=JSON.stringify({op:'subscribe',args:['instrument']});ws_mex.onopen=function(){ws_mex.send(msg_mex)};ws_mex.onmessage=function(event){let msg=JSON.parse(event.data);if(typeof msg['action']==='undefined'){return}if(msg['table']==='instrument'&&((msg['action']==='partial'&&msg['attributes']['symbol']==='unique')||msg['action']==='update')){if(msg['action']==='partial'&&msg['attributes']['symbol']==='unique'){for(let key in msg['data']){let data=msg['data'][key];lastPrices[data['symbol']]=data['lastPrice'];if(typeof data['openInterest']!=='undefined'){lastOI[data['symbol']]=data['openInterest']}}}for(let key in msg['data']){let data=msg['data'][key];if(typeof data['lastPrice']!=='undefined'){lastPrices[data['symbol']]=data['lastPrice'];switch(data['symbol']){case'XBTUSD':{let is_ow=false;for(let i=myChart12.data.datasets[0].data.length-1,l=0;i>=l;i--){if(myChart12.data.datasets[0].data[i]['x']===nowtime){is_ow=true;myChart12.data.datasets[0].data[i]['y']=data['lastPrice'];break}}if(is_ow===false){myChart12.data.datasets[0].data.push({x:nowtime,y:data['lastPrice']})}myChart12.data.datasets[0].label='XBTUSD: $'+data['lastPrice'].toLocaleString()+get_change(myChart12.data.datasets[0].data,true);is_ow=false;for(let i=myChart14.data.datasets[0].data.length-1,l=0;i>=l;i--){if(myChart14.data.datasets[0].data[i]['x']===nowtime){is_ow=true;myChart14.data.datasets[0].data[i]['y']=data['lastPrice']-lastPrices['.BXBT'];break}}if(is_ow===false){myChart14.data.datasets[0].data.push({x:nowtime,y:data['lastPrice']-lastPrices['.BXBT']})}myChart14.data.datasets[0].label='XBTUSD: $'+(data['lastPrice']-lastPrices['.BXBT']).toLocaleString()+get_change(myChart14.data.datasets[0].data,true);needUpdate.myChart12=true;needUpdate.myChart14=true;break}case'XBTU19':{let is_ow=false;for(let i=myChart12.data.datasets[1].data.length-1,l=0;i>=l;i--){if(myChart12.data.datasets[1].data[i]['x']===nowtime){is_ow=true;myChart12.data.datasets[1].data[i]['y']=data['lastPrice'];break}}if(is_ow===false){myChart12.data.datasets[1].data.push({x:nowtime,y:data['lastPrice']})}myChart12.data.datasets[1].label='XBTU19: $'+data['lastPrice'].toLocaleString()+get_change(myChart12.data.datasets[1].data,true);is_ow=false;for(let i=myChart14.data.datasets[1].data.length-1,l=0;i>=l;i--){if(myChart14.data.datasets[1].data[i]['x']===nowtime){is_ow=true;myChart14.data.datasets[1].data[i]['y']=data['lastPrice']-lastPrices['.BXBT'];break}}if(is_ow===false){myChart14.data.datasets[1].data.push({x:nowtime,y:data['lastPrice']-lastPrices['.BXBT']})}myChart14.data.datasets[1].label='XBTU19: $'+(data['lastPrice']-lastPrices['.BXBT']).toLocaleString()+get_change(myChart14.data.datasets[1].data,true);needUpdate.myChart12=true;needUpdate.myChart14=true;break}case'XBTZ19':{let is_ow=false;for(let i=myChart12.data.datasets[2].data.length-1,l=0;i>=l;i--){if(myChart12.data.datasets[2].data[i]['x']===nowtime){is_ow=true;myChart12.data.datasets[2].data[i]['y']=data['lastPrice'];break}}if(is_ow===false){myChart12.data.datasets[2].data.push({x:nowtime,y:data['lastPrice']})}myChart12.data.datasets[2].label='XBTZ19: $'+data['lastPrice'].toLocaleString()+get_change(myChart12.data.datasets[2].data,true);is_ow=false;for(let i=myChart14.data.datasets[2].data.length-1,l=0;i>=l;i--){if(myChart14.data.datasets[2].data[i]['x']===nowtime){is_ow=true;myChart14.data.datasets[2].data[i]['y']=data['lastPrice']-lastPrices['.BXBT'];break}}if(is_ow===false){myChart14.data.datasets[2].data.push({x:nowtime,y:data['lastPrice']-lastPrices['.BXBT']})}myChart14.data.datasets[2].label='XBTZ19: $'+(data['lastPrice']-lastPrices['.BXBT']).toLocaleString()+get_change(myChart14.data.datasets[2].data,true);needUpdate.myChart12=true;needUpdate.myChart14=true;break}case'ETHUSD':{let is_ow=false;for(let i=myChart12.data.datasets[3].data.length-1,l=0;i>=l;i--){if(myChart12.data.datasets[3].data[i]['x']===nowtime){is_ow=true;myChart12.data.datasets[3].data[i]['y']=data['lastPrice'];break}}if(is_ow===false){myChart12.data.datasets[3].data.push({x:nowtime,y:data['lastPrice']})}myChart12.data.datasets[3].label='ETHUSD: $'+data['lastPrice'].toLocaleString()+get_change(myChart12.data.datasets[3].data,true);needUpdate.myChart12=true;break}default:break}}if(typeof data['openInterest']!=='undefined'){lastOI[data['symbol']]=data['openInterest'];switch(data['symbol']){case'XBTUSD':{let is_ow=false;for(let i=myChart11.data.datasets[0].data.length-1,l=0;i>=l;i--){if(myChart11.data.datasets[0].data[i]['x']===nowtime){is_ow=true;myChart11.data.datasets[0].data[i]['y']=(data['openInterest']);break}}if(is_ow===false){myChart11.data.datasets[0].data.push({x:nowtime,y:(data['openInterest'])})}myChart11.data.datasets[0].label='$'+Math.round(data['openInterest']).toLocaleString()+''+get_change(myChart11.data.datasets[0].data,true);needUpdate.myChart11=true;break}case'XBTU19':{let is_ow=false;for(let i=myChart11.data.datasets[1].data.length-1,l=0;i>=l;i--){if(myChart11.data.datasets[1].data[i]['x']===nowtime){is_ow=true;myChart11.data.datasets[1].data[i]['y']=(data['openInterest']);break}}if(is_ow===false){myChart11.data.datasets[1].data.push({x:nowtime,y:(data['openInterest'])})}myChart11.data.datasets[1].label='$'+Math.round(data['openInterest']).toLocaleString()+''+get_change(myChart11.data.datasets[1].data,true);needUpdate.myChart11=true;break}case'XBTZ19':{let is_ow=false;for(let i=myChart11.data.datasets[2].data.length-1,l=0;i>=l;i--){if(myChart11.data.datasets[2].data[i]['x']===nowtime){is_ow=true;myChart11.data.datasets[2].data[i]['y']=(data['openInterest']);break}}if(is_ow===false){myChart11.data.datasets[2].data.push({x:nowtime,y:(data['openInterest'])})}myChart11.data.datasets[2].label='$'+Math.round(data['openInterest']).toLocaleString()+''+get_change(myChart11.data.datasets[2].data,true);needUpdate.myChart11=true;break}case'ETHUSD':{let is_ow=false;for(let i=myChart11.data.datasets[3].data.length-1,l=0;i>=l;i--){if(myChart11.data.datasets[3].data[i]['x']===nowtime){is_ow=true;myChart11.data.datasets[3].data[i]['y']=(data['openInterest']);break}}if(is_ow===false){myChart11.data.datasets[3].data.push({x:nowtime,y:(data['openInterest'])})}myChart11.data.datasets[3].label='$'+Math.round(data['openInterest']).toLocaleString()+''+get_change(myChart11.data.datasets[3].data,true);needUpdate.myChart11=true;break}case'ETHU19':case'ADAU19':case'BCHU19':case'EOSU19':case'LTCU19':case'TRXU19':case'XRPU19':{let altOI=(lastOI['ETHU19']*lastPrices['.BETHXBT'])+(lastOI['ADAU19']*lastPrices['.BADAXBT'])+(lastOI['BCHU19']*lastPrices['.BBCHXBT'])+(lastOI['EOSU19']*lastPrices['.BEOSXBT'])+(lastOI['LTCU19']*lastPrices['.BLTCXBT'])+(lastOI['TRXU19']*lastPrices['.TRXXBT'])+(lastOI['XRPU19']*lastPrices['.BXRPXBT']);let is_ow=false;for(let i=myChart11.data.datasets[4].data.length-1,l=0;i>=l;i--){if(myChart11.data.datasets[4].data[i]['x']===nowtime){is_ow=true;myChart11.data.datasets[4].data[i]['y']=altOI*lastPrices['.BXBT'];break}}if(is_ow===false){myChart11.data.datasets[4].data.push({x:nowtime,y:altOI*lastPrices['.BXBT']})}myChart11.data.datasets[4].label='$'+Math.round(altOI*lastPrices['.BXBT']).toLocaleString()+''+get_change(myChart11.data.datasets[4].data,true);needUpdate.myChart11=true;break}default:break}}if(typeof data['fundingRate']!=='undefined'){switch(data['symbol']){case'XBTUSD':{let is_ow=false;for(let i=myChart10.data.datasets[1].data.length-1,l=0;i>=l;i--){if(myChart10.data.datasets[1].data[i]['x']===nowtime){is_ow=true;myChart10.data.datasets[1].data[i]['y']=(data['fundingRate']*100);break}}if(is_ow===false){myChart10.data.datasets[1].data.push({x:nowtime,y:(data['fundingRate']*100)})}myChart10.data.datasets[1].label='XBTUSD FR: '+(data['fundingRate']*100).toFixed(4)+'%';needUpdate.myChart10=true;break}case'ETHUSD':{let is_ow=false;for(let i=myChart10.data.datasets[2].data.length-1,l=0;i>=l;i--){if(myChart10.data.datasets[2].data[i]['x']===nowtime){is_ow=true;myChart10.data.datasets[2].data[i]['y']=(data['fundingRate']*100);break}}if(is_ow===false){myChart10.data.datasets[2].data.push({x:nowtime,y:(data['fundingRate']*100)})}myChart10.data.datasets[2].label='ETHUSD FR: '+(data['fundingRate']*100).toFixed(4)+'%';needUpdate.myChart10=true;break}default:break}}if(typeof data['indicativeFundingRate']!=='undefined'){switch(data['symbol']){case'XBTUSD':{let is_ow=false;for(let i=myChart10.data.datasets[3].data.length-1,l=0;i>=l;i--){if(myChart10.data.datasets[3].data[i]['x']===nowtime){is_ow=true;myChart10.data.datasets[3].data[i]['y']=(data['indicativeFundingRate']*100);break}}if(is_ow===false){myChart10.data.datasets[3].data.push({x:nowtime,y:(data['indicativeFundingRate']*100)})}myChart10.data.datasets[3].label='XBTUSD Next: '+(data['indicativeFundingRate']*100).toFixed(4)+'%';needUpdate.myChart10=true;break}case'ETHUSD':{let is_ow=false;for(let i=myChart10.data.datasets[4].data.length-1,l=0;i>=l;i--){if(myChart10.data.datasets[4].data[i]['x']===nowtime){is_ow=true;myChart10.data.datasets[4].data[i]['y']=(data['indicativeFundingRate']*100);break}}if(is_ow===false){myChart10.data.datasets[4].data.push({x:nowtime,y:(data['indicativeFundingRate']*100)})}myChart10.data.datasets[4].label='ETHUSD Next: '+(data['indicativeFundingRate']*100).toFixed(4)+'%';needUpdate.myChart10=true;break}default:break}}}}};ws_mex.onclose=function(){console.log('mex_socket close');ws_mex=null;setTimeout(connect_mex,reconnectInterval)}};window.onload=function(){drawOtherData();var ctx9=document.getElementById('myChart9').getContext('2d');window.myChart9=new Chart(ctx9,config9);var ctx10=document.getElementById('myChart10').getContext('2d');window.myChart10=new Chart(ctx10,config10);var ctx11=document.getElementById('myChart11').getContext('2d');window.myChart11=new Chart(ctx11,config11);var ctx12=document.getElementById('myChart12').getContext('2d');window.myChart12=new Chart(ctx12,config12);var ctx13=document.getElementById('myChart13').getContext('2d');window.myChart13=new Chart(ctx13,config13);var ctx14=document.getElementById('myChart14').getContext('2d');window.myChart14=new Chart(ctx14,config14);setInterval(function(){if(window.addDay!==-31&&window.addDay!==-92){drawOtherData()}},300*1000);setInterval(myRefresh,60*1000);setInterval(myDraw,10*1000);connect_mex()};var chartColors={red:'rgb(255, 99, 132)',orange:'rgb(255, 159, 64)',yellow:'rgb(255, 205, 86)',green:'rgb(75, 192, 192)',blue:'rgb(54, 162, 235)',purple:'rgb(153, 102, 255)',grey:'rgb(201, 203, 207)'};Chart.defaults.global.elements.point.radius=0;Chart.defaults.global.elements.line.cubicInterpolationMode='monotone';Chart.Legend.prototype.afterFit=function(){this.height=this.height+10};var color=Chart.helpers.color;let myJson;function drawOtherData(){let json_url='';if(window.addDay===-31){json_url='https://tainoko.github.io/lab/oi_m.json?t='+Math.round(Date.now()/600000).toString()}else if(window.addDay===-92){json_url='https://tainoko.github.io/lab/oi_m3.json?t='+Math.round(Date.now()/600000).toString()}else{json_url='https://tainoko.github.io/lab/oi.json?t='+Math.round(Date.now()/60000).toString()}fetch(json_url).then(function(response){return response.json()}).then(function(jsonData){myJson=jsonData;drawChart()})}window.drawChart=function(){let fromUnixtime=moment().add(addDay,'days').unix();let change;myChart9.data.datasets[2].data=[];for(let i=0,l=myJson['MEM']['mempool'].length;i<l;i++){if(fromUnixtime>myJson['MEM']['timestamp'][i])continue;myChart9.data.datasets[2].data.push({x:myJson['MEM']['timestamp'][i]*1000,y:myJson['MEM']['mempool'][i]})}myChart9.data.datasets[2].label='Mempool: '+Math.round(myJson['MEM']['mempool'][myJson['MEM']['mempool'].length-1]).toLocaleString()+get_change(myChart9.data.datasets[2].data,true);myChart9.data.datasets[1].data=[];for(let i=0,l=myJson['HR']['hashrate'].length;i<l;i++){if(fromUnixtime>myJson['HR']['timestamp'][i])continue;myChart9.data.datasets[1].data.push({x:myJson['HR']['timestamp'][i]*1000,y:myJson['HR']['hashrate'][i]})}myChart9.data.datasets[1].label='Hashrate: '+Math.round(myJson['HR']['hashrate'][myJson['HR']['hashrate'].length-1]).toLocaleString()+get_change(myChart9.data.datasets[1].data,true);myChart9.data.datasets[0].data=[];for(let i=0,l=myJson['DOMI']['dominance'].length;i<l;i++){if(fromUnixtime>myJson['DOMI']['timestamp'][i])continue;myChart9.data.datasets[0].data.push({x:myJson['DOMI']['timestamp'][i]*1000,y:myJson['DOMI']['dominance'][i]})}myChart9.data.datasets[0].label='Dominance: '+myJson['DOMI']['dominance'][myJson['DOMI']['dominance'].length-1].toFixed(1)+get_change(myChart9.data.datasets[0].data,true);myChart9.update();myChart10.data.datasets[0].data=[];for(let i=0,l=myJson['XBTUSD']['bf_sfd'].length;i<l;i++){if(fromUnixtime>myJson['XBTUSD']['timestamp'][i])continue;myChart10.data.datasets[0].data.push({x:myJson['XBTUSD']['timestamp'][i]*1000,y:myJson['XBTUSD']['bf_sfd'][i]})}myChart10.data.datasets[0].label='SFD: '+myJson['XBTUSD']['bf_sfd'][myJson['XBTUSD']['bf_sfd'].length-1].toFixed(2)+'%';let tmpBackup=[];for(let i=myChart10.data.datasets[1].data.length-1,l=0,t=myJson['XBTUSD']['timestamp'][myJson['XBTUSD']['timestamp'].length-1]*1000;i>=l;i--){if(myChart10.data.datasets[1].data[i]['x']>t){tmpBackup.unshift(myChart10.data.datasets[1].data[i])}}myChart10.data.datasets[1].data=[];for(let i=0,l=myJson['XBTUSD']['fundingRate'].length;i<l;i++){if(fromUnixtime>myJson['XBTUSD']['timestamp'][i])continue;myChart10.data.datasets[1].data.push({x:myJson['XBTUSD']['timestamp'][i]*1000,y:myJson['XBTUSD']['fundingRate'][i]*100})}myChart10.data.datasets[1].data=myChart10.data.datasets[1].data.concat(tmpBackup);myChart10.data.datasets[1].label='XBTUSD FR: '+(myChart10.data.datasets[1].data[myChart10.data.datasets[1].data.length-1]['y']).toFixed(4)+'%';tmpBackup=[];for(let i=myChart10.data.datasets[2].data.length-1,l=0,t=myJson['ETHUSD']['timestamp'][myJson['ETHUSD']['timestamp'].length-1]*1000;i>=l;i--){if(myChart10.data.datasets[2].data[i]['x']>t){tmpBackup.unshift(myChart10.data.datasets[2].data[i])}}myChart10.data.datasets[2].data=[];for(let i=0,l=myJson['ETHUSD']['fundingRate'].length;i<l;i++){if(fromUnixtime>myJson['ETHUSD']['timestamp'][i])continue;myChart10.data.datasets[2].data.push({x:myJson['ETHUSD']['timestamp'][i]*1000,y:myJson['ETHUSD']['fundingRate'][i]*100})}myChart10.data.datasets[2].data=myChart10.data.datasets[2].data.concat(tmpBackup);myChart10.data.datasets[2].label='ETHUSD FR: '+(myChart10.data.datasets[2].data[myChart10.data.datasets[2].data.length-1]['y']).toFixed(4)+'%';tmpBackup=[];for(let i=myChart10.data.datasets[3].data.length-1,l=0,t=myJson['XBTUSD']['timestamp'][myJson['XBTUSD']['timestamp'].length-1]*1000;i>=l;i--){if(myChart10.data.datasets[3].data[i]['x']>t){tmpBackup.unshift(myChart10.data.datasets[3].data[i])}}myChart10.data.datasets[3].data=[];for(let i=0,l=myJson['XBTUSD']['indicativeFundingRate'].length;i<l;i++){if(fromUnixtime>myJson['XBTUSD']['timestamp'][i])continue;myChart10.data.datasets[3].data.push({x:myJson['XBTUSD']['timestamp'][i]*1000,y:myJson['XBTUSD']['indicativeFundingRate'][i]*100})}myChart10.data.datasets[3].data=myChart10.data.datasets[3].data.concat(tmpBackup);myChart10.data.datasets[3].label='XBTUSD Next: '+(myChart10.data.datasets[3].data[myChart10.data.datasets[3].data.length-1]['y']).toFixed(4)+'%';tmpBackup=[];for(let i=myChart10.data.datasets[4].data.length-1,l=0,t=myJson['ETHUSD']['timestamp'][myJson['ETHUSD']['timestamp'].length-1]*1000;i>=l;i--){if(myChart10.data.datasets[4].data[i]['x']>t){tmpBackup.unshift(myChart10.data.datasets[4].data[i])}}myChart10.data.datasets[4].data=[];for(let i=0,l=myJson['ETHUSD']['indicativeFundingRate'].length;i<l;i++){if(fromUnixtime>myJson['ETHUSD']['timestamp'][i])continue;myChart10.data.datasets[4].data.push({x:myJson['ETHUSD']['timestamp'][i]*1000,y:myJson['ETHUSD']['indicativeFundingRate'][i]*100})}myChart10.data.datasets[4].data=myChart10.data.datasets[4].data.concat(tmpBackup);myChart10.data.datasets[4].label='ETHUSD Next: '+(myChart10.data.datasets[4].data[myChart10.data.datasets[4].data.length-1]['y']).toFixed(4)+'%';myChart10.update();tmpBackup=[];for(let i=myChart11.data.datasets[0].data.length-1,l=0,t=myJson['XBTUSD']['timestamp'][myJson['XBTUSD']['timestamp'].length-1]*1000;i>=l;i--){if(myChart11.data.datasets[0].data[i]['x']>t){tmpBackup.unshift(myChart11.data.datasets[0].data[i])}}myChart11.data.datasets[0].data=[];for(let i=0,l=myJson['XBTUSD']['openInterest'].length;i<l;i++){if(fromUnixtime>myJson['XBTUSD']['timestamp'][i])continue;myChart11.data.datasets[0].data.push({x:myJson['XBTUSD']['timestamp'][i]*1000,y:myJson['XBTUSD']['openInterest'][i]})}myChart11.data.datasets[0].data=myChart11.data.datasets[0].data.concat(tmpBackup);myChart11.data.datasets[0].label='$'+Math.round(myChart11.data.datasets[0].data[myChart11.data.datasets[0].data.length-1]['y']).toLocaleString()+''+get_change(myChart11.data.datasets[0].data,true);tmpBackup=[];for(let i=myChart11.data.datasets[1].data.length-1,l=0,t=myJson['XBTU19']['timestamp'][myJson['XBTU19']['timestamp'].length-1]*1000;i>=l;i--){if(myChart11.data.datasets[1].data[i]['x']>t){tmpBackup.unshift(myChart11.data.datasets[1].data[i])}}myChart11.data.datasets[1].data=[];for(let i=0,l=myJson['XBTU19']['openInterest'].length;i<l;i++){if(fromUnixtime>myJson['XBTU19']['timestamp'][i])continue;myChart11.data.datasets[1].data.push({x:myJson['XBTU19']['timestamp'][i]*1000,y:myJson['XBTU19']['openInterest'][i]})}myChart11.data.datasets[1].data=myChart11.data.datasets[1].data.concat(tmpBackup);myChart11.data.datasets[1].label='$'+Math.round(myChart11.data.datasets[1].data[myChart11.data.datasets[1].data.length-1]['y']).toLocaleString()+''+get_change(myChart11.data.datasets[1].data,true);tmpBackup=[];for(let i=myChart11.data.datasets[2].data.length-1,l=0,t=myJson['XBTZ19']['timestamp'][myJson['XBTZ19']['timestamp'].length-1]*1000;i>=l;i--){if(myChart11.data.datasets[2].data[i]['x']>t){tmpBackup.unshift(myChart11.data.datasets[2].data[i])}}myChart11.data.datasets[2].data=[];for(let i=0,l=myJson['XBTZ19']['openInterest'].length;i<l;i++){if(fromUnixtime>myJson['XBTZ19']['timestamp'][i])continue;myChart11.data.datasets[2].data.push({x:myJson['XBTZ19']['timestamp'][i]*1000,y:myJson['XBTZ19']['openInterest'][i]})}myChart11.data.datasets[2].data=myChart11.data.datasets[2].data.concat(tmpBackup);myChart11.data.datasets[2].label='$'+Math.round(myChart11.data.datasets[2].data[myChart11.data.datasets[2].data.length-1]['y']).toLocaleString()+''+get_change(myChart11.data.datasets[2].data,true);tmpBackup=[];for(let i=myChart11.data.datasets[3].data.length-1,l=0,t=myJson['ETHUSD']['timestamp'][myJson['ETHUSD']['timestamp'].length-1]*1000;i>=l;i--){if(myChart11.data.datasets[3].data[i]['x']>t){tmpBackup.unshift(myChart11.data.datasets[3].data[i])}}myChart11.data.datasets[3].data=[];for(let i=0,l=myJson['ETHUSD']['openInterest'].length;i<l;i++){if(fromUnixtime>myJson['ETHUSD']['timestamp'][i])continue;myChart11.data.datasets[3].data.push({x:myJson['ETHUSD']['timestamp'][i]*1000,y:myJson['ETHUSD']['openInterest'][i]})}myChart11.data.datasets[3].data=myChart11.data.datasets[3].data.concat(tmpBackup);myChart11.data.datasets[3].label='$'+Math.round(myChart11.data.datasets[3].data[myChart11.data.datasets[3].data.length-1]['y']).toLocaleString()+''+get_change(myChart11.data.datasets[3].data,true);tmpBackup=[];for(let i=myChart11.data.datasets[4].data.length-1,l=0,t=myJson['ALT']['timestamp'][myJson['ALT']['timestamp'].length-1]*1000;i>=l;i--){if(myChart11.data.datasets[4].data[i]['x']>t){tmpBackup.unshift(myChart11.data.datasets[4].data[i])}}myChart11.data.datasets[4].data=[];for(let i=0,l=myJson['ALT']['openInterest'].length;i<l;i++){if(fromUnixtime>myJson['ALT']['timestamp'][i])continue;myChart11.data.datasets[4].data.push({x:myJson['ALT']['timestamp'][i]*1000,y:myJson['ALT']['openInterest'][i]*myJson['XBTUSD']['indicativeSettlePrice'][i]})}myChart11.data.datasets[4].data=myChart11.data.datasets[4].data.concat(tmpBackup);myChart11.data.datasets[4].label='$'+Math.round(myChart11.data.datasets[4].data[myChart11.data.datasets[4].data.length-1]['y']).toLocaleString()+''+get_change(myChart11.data.datasets[4].data,true);myChart11.update();tmpBackup=[];for(let i=myChart12.data.datasets[0].data.length-1,l=0,t=myJson['XBTUSD']['timestamp'][myJson['XBTUSD']['timestamp'].length-1]*1000;i>=l;i--){if(myChart12.data.datasets[0].data[i]['x']>t){tmpBackup.unshift(myChart12.data.datasets[0].data[i])}}myChart12.data.datasets[0].data=[];for(let i=0,l=myJson['XBTUSD']['lastPrice'].length;i<l;i++){if(fromUnixtime>myJson['XBTUSD']['timestamp'][i])continue;myChart12.data.datasets[0].data.push({x:myJson['XBTUSD']['timestamp'][i]*1000,y:myJson['XBTUSD']['lastPrice'][i]})}myChart12.data.datasets[0].data=myChart12.data.datasets[0].data.concat(tmpBackup);myChart12.data.datasets[0].label='XBTUSD: $'+myChart12.data.datasets[0].data[myChart12.data.datasets[0].data.length-1]['y'].toLocaleString()+get_change(myChart12.data.datasets[0].data,true);tmpBackup=[];for(let i=myChart12.data.datasets[1].data.length-1,l=0,t=myJson['XBTU19']['timestamp'][myJson['XBTU19']['timestamp'].length-1]*1000;i>=l;i--){if(myChart12.data.datasets[1].data[i]['x']>t){tmpBackup.unshift(myChart12.data.datasets[1].data[i])}}myChart12.data.datasets[1].data=[];for(let i=0,l=myJson['XBTU19']['lastPrice'].length;i<l;i++){if(fromUnixtime>myJson['XBTU19']['timestamp'][i])continue;myChart12.data.datasets[1].data.push({x:myJson['XBTU19']['timestamp'][i]*1000,y:myJson['XBTU19']['lastPrice'][i]})}myChart12.data.datasets[1].data=myChart12.data.datasets[1].data.concat(tmpBackup);myChart12.data.datasets[1].label='XBTU19: $'+myChart12.data.datasets[1].data[myChart12.data.datasets[1].data.length-1]['y'].toLocaleString()+get_change(myChart12.data.datasets[1].data,true);tmpBackup=[];for(let i=myChart12.data.datasets[2].data.length-1,l=0,t=myJson['XBTZ19']['timestamp'][myJson['XBTZ19']['timestamp'].length-1]*1000;i>=l;i--){if(myChart12.data.datasets[2].data[i]['x']>t){tmpBackup.unshift(myChart12.data.datasets[2].data[i])}}myChart12.data.datasets[2].data=[];for(let i=0,l=myJson['XBTZ19']['lastPrice'].length;i<l;i++){if(fromUnixtime>myJson['XBTZ19']['timestamp'][i])continue;myChart12.data.datasets[2].data.push({x:myJson['XBTZ19']['timestamp'][i]*1000,y:myJson['XBTZ19']['lastPrice'][i]})}myChart12.data.datasets[2].data=myChart12.data.datasets[2].data.concat(tmpBackup);myChart12.data.datasets[2].label='XBTZ19: $'+myChart12.data.datasets[2].data[myChart12.data.datasets[2].data.length-1]['y'].toLocaleString()+get_change(myChart12.data.datasets[2].data,true);tmpBackup=[];for(let i=myChart12.data.datasets[3].data.length-1,l=0,t=myJson['ETHUSD']['timestamp'][myJson['ETHUSD']['timestamp'].length-1]*1000;i>=l;i--){if(myChart12.data.datasets[3].data[i]['x']>t){tmpBackup.unshift(myChart12.data.datasets[3].data[i])}}myChart12.data.datasets[3].data=[];for(let i=0,l=myJson['ETHUSD']['lastPrice'].length;i<l;i++){if(fromUnixtime>myJson['ETHUSD']['timestamp'][i])continue;myChart12.data.datasets[3].data.push({x:myJson['ETHUSD']['timestamp'][i]*1000,y:myJson['ETHUSD']['lastPrice'][i]})}myChart12.data.datasets[3].data=myChart12.data.datasets[3].data.concat(tmpBackup);myChart12.data.datasets[3].label='ETHUSD: $'+myChart12.data.datasets[3].data[myChart12.data.datasets[3].data.length-1]['y'].toLocaleString()+get_change(myChart12.data.datasets[3].data,true);myChart12.update();myChart13.data.datasets[0].data=[];for(let i=0,l=myJson['XBTUSD']['fineLong'].length;i<l;i++){if(fromUnixtime>myJson['XBTUSD']['timestamp'][i])continue;myChart13.data.datasets[0].data.push({x:myJson['XBTUSD']['timestamp'][i]*1000,y:myJson['XBTUSD']['fineLong'][i]})}myChart13.data.datasets[0].label='Long: '+myJson['XBTUSD']['fineLong'][myJson['XBTUSD']['fineLong'].length-1].toLocaleString()+' BTC'+get_change(myChart13.data.datasets[0].data,true);myChart13.data.datasets[1].data=[];for(let i=0,l=myJson['XBTUSD']['fineShort'].length;i<l;i++){if(fromUnixtime>myJson['XBTUSD']['timestamp'][i])continue;myChart13.data.datasets[1].data.push({x:myJson['XBTUSD']['timestamp'][i]*1000,y:myJson['XBTUSD']['fineShort'][i]})}myChart13.data.datasets[1].label='Short: '+myJson['XBTUSD']['fineShort'][myJson['XBTUSD']['fineShort'].length-1].toLocaleString()+' BTC'+get_change(myChart13.data.datasets[1].data,true);myChart13.data.datasets[2].data=[];for(let i=0,l=myJson['XBTUSD']['fineTLong'].length;i<l;i++){if(fromUnixtime>myJson['XBTUSD']['timestamp'][i])continue;myChart13.data.datasets[2].data.push({x:myJson['XBTUSD']['timestamp'][i]*1000,y:myJson['XBTUSD']['fineTLong'][i]})}myChart13.data.datasets[2].label='USDT Long: '+myJson['XBTUSD']['fineTLong'][myJson['XBTUSD']['fineTLong'].length-1].toLocaleString()+' BTC'+get_change(myChart13.data.datasets[2].data,true);myChart13.data.datasets[3].data=[];for(let i=0,l=myJson['XBTUSD']['fineTShort'].length;i<l;i++){if(fromUnixtime>myJson['XBTUSD']['timestamp'][i])continue;myChart13.data.datasets[3].data.push({x:myJson['XBTUSD']['timestamp'][i]*1000,y:myJson['XBTUSD']['fineTShort'][i]})}myChart13.data.datasets[3].label='USDT Short: '+myJson['XBTUSD']['fineTShort'][myJson['XBTUSD']['fineTShort'].length-1].toLocaleString()+' BTC'+get_change(myChart13.data.datasets[3].data,true);myChart13.update();tmpBackup=[];for(let i=myChart14.data.datasets[0].data.length-1,l=0,t=myJson['XBTUSD']['timestamp'][myJson['XBTUSD']['timestamp'].length-1]*1000;i>=l;i--){if(myChart14.data.datasets[0].data[i]['x']>t){tmpBackup.unshift(myChart14.data.datasets[0].data[i])}}myChart14.data.datasets[0].data=[];for(let i=0,l=myJson['XBTUSD']['lastPrice'].length;i<l;i++){if(fromUnixtime>myJson['XBTUSD']['timestamp'][i]||myJson['XBTUSD']['indicativeSettlePrice'][i]===null)continue;myChart14.data.datasets[0].data.push({x:myJson['XBTUSD']['timestamp'][i]*1000,y:myJson['XBTUSD']['lastPrice'][i]-myJson['XBTUSD']['indicativeSettlePrice'][i]})}myChart14.data.datasets[0].data=myChart14.data.datasets[0].data.concat(tmpBackup);myChart14.data.datasets[0].label='$'+(myChart14.data.datasets[0].data[myChart14.data.datasets[0].data.length-1]['y']).toLocaleString()+get_change(myChart14.data.datasets[0].data,true);tmpBackup=[];for(let i=myChart14.data.datasets[1].data.length-1,l=0,t=myJson['XBTU19']['timestamp'][myJson['XBTU19']['timestamp'].length-1]*1000;i>=l;i--){if(myChart14.data.datasets[1].data[i]['x']>t){tmpBackup.unshift(myChart14.data.datasets[1].data[i])}}myChart14.data.datasets[1].data=[];for(let i=0,l=myJson['XBTU19']['lastPrice'].length;i<l;i++){if(fromUnixtime>myJson['XBTU19']['timestamp'][i]||myJson['XBTU19']['indicativeSettlePrice'][i]===null)continue;myChart14.data.datasets[1].data.push({x:myJson['XBTU19']['timestamp'][i]*1000,y:myJson['XBTU19']['lastPrice'][i]-myJson['XBTU19']['indicativeSettlePrice'][i]})}myChart14.data.datasets[1].data=myChart14.data.datasets[1].data.concat(tmpBackup);myChart14.data.datasets[1].label='$'+(myChart14.data.datasets[1].data[myChart14.data.datasets[1].data.length-1]['y']).toLocaleString()+get_change(myChart14.data.datasets[1].data,true);tmpBackup=[];for(let i=myChart14.data.datasets[2].data.length-1,l=0,t=myJson['XBTZ19']['timestamp'][myJson['XBTZ19']['timestamp'].length-1]*1000;i>=l;i--){if(myChart14.data.datasets[2].data[i]['x']>t){tmpBackup.unshift(myChart14.data.datasets[2].data[i])}}myChart14.data.datasets[2].data=[];for(let i=0,l=myJson['XBTZ19']['lastPrice'].length;i<l;i++){if(fromUnixtime>myJson['XBTZ19']['timestamp'][i]||myJson['XBTZ19']['indicativeSettlePrice'][i]===null)continue;myChart14.data.datasets[2].data.push({x:myJson['XBTZ19']['timestamp'][i]*1000,y:myJson['XBTZ19']['lastPrice'][i]-myJson['XBTZ19']['indicativeSettlePrice'][i]})}myChart14.data.datasets[2].data=myChart14.data.datasets[2].data.concat(tmpBackup);myChart14.data.datasets[2].label='$'+(myChart14.data.datasets[2].data[myChart14.data.datasets[2].data.length-1]['y']).toLocaleString()+get_change(myChart14.data.datasets[2].data,true);myChart14.update()};var config9={type:'line',data:{labels:[],datasets:[{label:'Dominance',backgroundColor:color('#C21C2E').alpha(0.8).rgbString(),borderColor:'#C21C2E',fill:false,borderWidth:2,data:[],yAxisID:'y-axis-1',},{label:'Hashrate',backgroundColor:color('#418e00').alpha(0.8).rgbString(),borderColor:'#418e00',fill:false,borderWidth:2,data:[],yAxisID:'y-axis-3',},{label:'Mempool',backgroundColor:color('#4599ae').alpha(0.5).rgbString(),borderColor:'#4599ae',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-2',}]},options:{legend:{display:true},aspectRatio:8,title:{display:false,text:'Mempool'},scales:{xAxes:[{type:'time',stacked:false,time:{displayFormats:{day:'M/D',hour:'M/D k:mm',second:'k:mm:ss',minute:'k:mm',},tooltipFormat:'M/D k:mm',},gridLines:{display:true,drawBorder:false,drawTicks:false},ticks:{display:true,padding:10,}}],yAxes:[{id:'y-axis-1',position:'left',scaleLabel:{display:true,labelString:'Dominance'},stacked:false,ticks:{padding:10,fontSize:12,fontColor:'#1A1A1A',display:true,precision:0},gridLines:{display:false,drawBorder:false,drawTicks:false},afterFit:function(scale){scale.width=50},},{id:'y-axis-2',position:'right',scaleLabel:{display:true,labelString:'Mempool'},stacked:false,ticks:{padding:10,fontSize:12,fontColor:'#1A1A1A',display:true,suggestedMin:0,precision:0},gridLines:{display:true,drawBorder:false,zeroLineWidth:1,zeroLineColor:'#1A1A1A'},afterFit:function(scale){scale.width=100},},{id:'y-axis-3',position:'left',scaleLabel:{display:false,labelString:'Hashrate'},stacked:false,ticks:{padding:10,fontSize:12,fontColor:'#1A1A1A',display:false,precision:0},gridLines:{display:false,drawBorder:false,},afterFit:function(scale){scale.width=50},},]},tooltips:{mode:'nearest',intersect:false,callbacks:{label:function(tooltipItem,data){let label_y=tooltipItem.yLabel;let label_title=data.datasets[tooltipItem.datasetIndex].label;switch(tooltipItem.datasetIndex){case 0:label_title='Dominance';label_y=label_y.toFixed(1);break;case 1:label_title='Hashrate';label_y=Math.round(label_y).toLocaleString();break;case 2:label_title='Mempool';label_y=label_y.toFixed(0);break;default:break}return label_title+": "+label_y}}},hover:{mode:'nearest',intersect:false,animationDuration:0},animation:{duration:0},responsiveAnimationDuration:0,plugins:{streaming:false,zoom:{pan:{enabled:true,mode:'x',},zoom:{enabled:true,drag:false,mode:'x',speed:0.1,}}}}};var config10={type:'line',data:{labels:[],datasets:[{label:'bF SFD',backgroundColor:color('#008a06').alpha(0.8).rgbString(),borderColor:'#008a06',fill:false,borderWidth:1,data:[],yAxisID:'y-axis-2',},{label:'XBTUSD FR',backgroundColor:color('#C21C2E').alpha(0.8).rgbString(),borderColor:'#C21C2E',fill:false,borderWidth:2,data:[],yAxisID:'y-axis-1',steppedLine:'after',},{label:'ETHUSD FR',backgroundColor:color('#1951AE').alpha(0.8).rgbString(),borderColor:'#1951AE',fill:false,borderWidth:2,data:[],yAxisID:'y-axis-1',steppedLine:'after',},{label:'XBTUSD IFR',backgroundColor:color('#c26878').alpha(0.5).rgbString(),borderColor:'#c26878',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-1',},{label:'ETHUSD IFR',backgroundColor:color('#4599ae').alpha(0.5).rgbString(),borderColor:'#4599ae',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-1',}]},options:{legend:{display:true},aspectRatio:8,title:{display:false,text:'FR'},scales:{xAxes:[{type:'time',stacked:false,time:{displayFormats:{day:'M/D',hour:'M/D k:mm',second:'k:mm:ss',minute:'k:mm',},tooltipFormat:'M/D k:mm',},gridLines:{display:true,drawBorder:false,drawTicks:false},ticks:{display:false,padding:10,}}],yAxes:[{id:'y-axis-1',position:'left',scaleLabel:{display:true,labelString:'Funding'},stacked:false,ticks:{padding:10,fontSize:12,fontColor:'#1A1A1A',display:true,suggestedMin:0,},gridLines:{display:true,drawBorder:false,zeroLineWidth:1,zeroLineColor:'#1A1A1A'},afterFit:function(scale){scale.width=100},},{id:'y-axis-2',position:'right',scaleLabel:{display:true,labelString:'bF SFD'},stacked:false,ticks:{padding:10,fontSize:12,fontColor:'#1A1A1A',display:true,precision:2},gridLines:{display:false,drawBorder:false,drawTicks:false},afterFit:function(scale){scale.width=100},},]},tooltips:{mode:'nearest',intersect:false,callbacks:{label:function(tooltipItem,data){let label_y=tooltipItem.yLabel;let label_title=data.datasets[tooltipItem.datasetIndex].label;switch(tooltipItem.datasetIndex){case 0:label_title='SFD';label_y=label_y+'%';break;case 1:label_title='XBTUSD FR';label_y=label_y.toFixed(4)+'%';break;case 2:label_title='ETHUSD FR';label_y=label_y.toFixed(4)+'%';break;case 3:label_title='XBTUSD IFR';label_y=label_y.toFixed(4)+'%';break;case 4:label_title='ETHUSD IFR';label_y=label_y.toFixed(4)+'%';break;default:break}return label_title+": "+label_y}}},hover:{mode:'nearest',intersect:false,animationDuration:0},animation:{duration:0},responsiveAnimationDuration:0,plugins:{streaming:false,zoom:{pan:{enabled:true,mode:'x',},zoom:{enabled:true,drag:false,mode:'x',speed:0.1,}}}}};var config11={type:'line',data:{labels:[],datasets:[{label:'XBTUSD',backgroundColor:color('#C21C2E').alpha(0.1).rgbString(),borderColor:'#C21C2E',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-1',},{label:'XBTU19',backgroundColor:color('#DFB200').alpha(0.1).rgbString(),borderColor:'#DFB200',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-2',},{label:'XBTZ19',backgroundColor:color('#3A8630').alpha(0.1).rgbString(),borderColor:'#3A8630',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-3',},{label:'ETHUSD',backgroundColor:color('#1951AE').alpha(0.1).rgbString(),borderColor:'#1951AE',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-4',},{label:'ALT',backgroundColor:color('#666666').alpha(0.1).rgbString(),borderColor:'#666666',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-5',},]},options:{legend:{display:true},aspectRatio:4,title:{display:false,text:'BitMEX Open Interest Chart'},scales:{xAxes:[{type:'time',stacked:false,time:{displayFormats:{day:'M/D',hour:'M/D k:mm',second:'k:mm:ss',minute:'k:mm',},tooltipFormat:'M/D k:mm',},gridLines:{display:true,drawBorder:false,drawTicks:false},ticks:{display:false,padding:10,}}],yAxes:[{id:'y-axis-1',position:'left',scaleLabel:{display:true,labelString:'OI Chart ($)'},stacked:false,ticks:{padding:10,fontSize:12,fontColor:'#C21C2E',display:true,callback:function(label,index,labels){let retString='';if(label>=1000000){retString=Math.round(label/1000000)+'M'}return retString}},gridLines:{display:true,drawBorder:false,},afterFit:function(scale){scale.width=100},},{id:'y-axis-2',position:'right',scaleLabel:{display:false,labelString:'XBT'},stacked:false,ticks:{padding:10,fontSize:16,fontColor:'#1A1A1A',fontStyle:'bold',display:false},gridLines:{display:false,drawBorder:false,drawTicks:false}},{id:'y-axis-3',position:'left',scaleLabel:{display:false,labelString:'XBT'},stacked:false,ticks:{padding:10,fontSize:16,fontColor:'#1A1A1A',fontStyle:'bold',display:false},gridLines:{display:false,drawBorder:false,drawTicks:false}},{id:'y-axis-4',position:'right',scaleLabel:{display:false,labelString:'XBT'},stacked:false,ticks:{padding:10,fontSize:12,fontColor:'#1951AE',display:true,callback:function(label,index,labels){let retString='';if(label>=1000000){retString=Math.round(label/1000000)+'M'}return retString}},gridLines:{display:false,drawBorder:false,drawTicks:false},afterFit:function(scale){scale.width=100},},{id:'y-axis-5',position:'left',scaleLabel:{display:false,labelString:'XBT'},stacked:false,ticks:{padding:10,fontSize:16,fontColor:'#1A1A1A',fontStyle:'bold',display:false},gridLines:{display:false,drawBorder:false,drawTicks:false}},]},tooltips:{mode:'nearest',intersect:false,callbacks:{label:function(tooltipItem,data){let label_y=Math.round(tooltipItem.yLabel).toLocaleString();let label_title=data.datasets[tooltipItem.datasetIndex].label;switch(tooltipItem.datasetIndex){case 0:label_title='XBTUSD'+": $"+label_y+"";break;case 1:label_title='XBTU19'+": $"+label_y+"";break;case 2:label_title='XBTZ19'+": $"+label_y+"";break;case 3:label_title='ETHUSD'+": $"+label_y+"";break;case 4:label_title='ALT'+": $"+label_y+"";break;default:break}return label_title}}},hover:{mode:'nearest',intersect:false,animationDuration:0},animation:{duration:0},responsiveAnimationDuration:0,plugins:{streaming:false,zoom:{pan:{enabled:true,mode:'x',},zoom:{enabled:true,drag:false,mode:'x',speed:0.1,}}}}};var config12={type:'line',data:{labels:[],datasets:[{label:'XBTUSD',backgroundColor:color('#C21C2E').alpha(0.1).rgbString(),borderColor:'#C21C2E',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-1',},{label:'XBTU19',backgroundColor:color('#DFB200').alpha(0.1).rgbString(),borderColor:'#DFB200',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-1',},{label:'XBTZ19',backgroundColor:color('#3A8630').alpha(0.1).rgbString(),borderColor:'#3A8630',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-1',},{label:'ETHUSD',backgroundColor:color('#1951AE').alpha(0.1).rgbString(),borderColor:'#1951AE',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-2',},]},options:{legend:{display:true},aspectRatio:4,title:{display:false,text:'BitMEX Price Chart'},scales:{xAxes:[{type:'time',stacked:false,time:{displayFormats:{day:'M/D',hour:'M/D k:mm',second:'k:mm:ss',minute:'k:mm',},tooltipFormat:'M/D k:mm',},gridLines:{display:true,drawBorder:false,drawTicks:false},ticks:{display:false,padding:10,}}],yAxes:[{id:'y-axis-1',position:'left',scaleLabel:{display:true,labelString:'Price ($)'},stacked:false,ticks:{padding:10,fontColor:'#C21C2E',display:true},gridLines:{display:true,drawBorder:false,},afterFit:function(scale){scale.width=100},},{id:'y-axis-2',position:'right',scaleLabel:{display:false,labelString:'ETHUSD'},stacked:false,ticks:{padding:10,fontColor:'#1951AE',display:true},gridLines:{display:false,drawBorder:false,drawTicks:false},afterFit:function(scale){scale.width=100},},{id:'y-axis-3',position:'left',scaleLabel:{display:false,labelString:'XBT'},stacked:false,ticks:{padding:10,fontSize:16,fontColor:'#1A1A1A',fontStyle:'bold',display:false},gridLines:{display:false,drawBorder:false,drawTicks:false}},{id:'y-axis-4',position:'left',scaleLabel:{display:false,labelString:'XBT'},stacked:false,ticks:{padding:10,fontSize:16,fontColor:'#1A1A1A',fontStyle:'bold',display:false},gridLines:{display:false,drawBorder:false,drawTicks:false}},{id:'y-axis-5',position:'left',scaleLabel:{display:false,labelString:'XBT'},stacked:false,ticks:{padding:10,fontSize:16,fontColor:'#1A1A1A',fontStyle:'bold',display:false},gridLines:{display:false,drawBorder:false,drawTicks:false}},]},tooltips:{mode:'nearest',intersect:false,callbacks:{label:function(tooltipItem,data){let label_y=tooltipItem.yLabel.toLocaleString();let label_title=data.datasets[tooltipItem.datasetIndex].label;switch(tooltipItem.datasetIndex){case 0:label_title='XBTUSD';break;case 1:label_title='XBTU19';break;case 2:label_title='XBTZ19';break;case 3:label_title='ETHUSD';break;default:break}return label_title+": $"+label_y}}},hover:{mode:'nearest',intersect:false,animationDuration:0},animation:{duration:0},responsiveAnimationDuration:0,plugins:{streaming:false,zoom:{pan:{enabled:true,mode:'x',},zoom:{enabled:true,drag:false,mode:'x',speed:0.1,}}}}};var config13={type:'line',data:{labels:[],datasets:[{label:'Long',backgroundColor:color('#009f00').alpha(0.1).rgbString(),borderColor:'#009f00',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-1',},{label:'Short',backgroundColor:color('#9f0000').alpha(0.1).rgbString(),borderColor:'#9f0000',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-2',},{label:'USDT Long',backgroundColor:color('#009f92').alpha(0.05).rgbString(),borderColor:'#009f92',fill:true,borderWidth:1,borderDash:[4,1],data:[],yAxisID:'y-axis-3',},{label:'USDT Short',backgroundColor:color('#9f5488').alpha(0.05).rgbString(),borderColor:'#9f5488',fill:true,borderWidth:1,borderDash:[4,1],data:[],yAxisID:'y-axis-4',}]},options:{legend:{display:true},aspectRatio:8,title:{display:false,text:'Bitfinex LS'},scales:{xAxes:[{type:'time',stacked:false,time:{displayFormats:{day:'M/D',hour:'M/D k:mm',second:'k:mm:ss',minute:'k:mm',},tooltipFormat:'M/D k:mm',},gridLines:{display:true,drawBorder:false,drawTicks:false},ticks:{display:false,padding:10,}}],yAxes:[{id:'y-axis-2',position:'left',scaleLabel:{display:false,labelString:'Short'},stacked:false,ticks:{padding:10,fontSize:12,fontColor:'#9f0000',display:true,},gridLines:{display:false,drawBorder:false,},afterFit:function(scale){scale.width=50},},{id:'y-axis-1',position:'left',scaleLabel:{display:false,labelString:'Long'},stacked:false,ticks:{padding:10,fontSize:12,fontColor:'#009f00',display:true,},gridLines:{display:true,drawBorder:false,drawTicks:false,zeroLineWidth:0,zeroLineColor:'#1A1A1A'},afterFit:function(scale){scale.width=50},},{id:'y-axis-3',position:'right',scaleLabel:{display:false,labelString:'Long'},stacked:false,ticks:{padding:10,fontSize:12,fontColor:'#009f92',display:true,},gridLines:{display:false,drawBorder:false,drawTicks:false,zeroLineWidth:0,zeroLineColor:'#1A1A1A'},afterFit:function(scale){scale.width=50},},{id:'y-axis-4',position:'right',scaleLabel:{display:false,labelString:'Short'},stacked:false,ticks:{padding:10,fontSize:12,fontColor:'#9f5488',display:true,},gridLines:{display:false,drawBorder:false,},afterFit:function(scale){scale.width=50},},]},tooltips:{mode:'nearest',intersect:false,callbacks:{label:function(tooltipItem,data){let label_y=tooltipItem.yLabel;let label_title=data.datasets[tooltipItem.datasetIndex].label;switch(tooltipItem.datasetIndex){case 0:label_title='Long';break;case 1:label_title='Short';break;case 2:label_title='USDT Long';break;case 3:label_title='USDT Short';break;default:break}return label_title+": "+label_y+' BTC'}}},hover:{mode:'nearest',intersect:false,animationDuration:0},animation:{duration:0},responsiveAnimationDuration:0,plugins:{streaming:false,zoom:{pan:{enabled:true,mode:'x',},zoom:{enabled:true,drag:false,mode:'x',speed:0.1,}}}}};var config14={type:'line',data:{labels:[],datasets:[{label:'XBTUSD',backgroundColor:color('#C21C2E').alpha(0.1).rgbString(),borderColor:'#C21C2E',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-1',},{label:'XBTU19',backgroundColor:color('#DFB200').alpha(0.1).rgbString(),borderColor:'#DFB200',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-1',},{label:'XBTZ19',backgroundColor:color('#3A8630').alpha(0.1).rgbString(),borderColor:'#3A8630',fill:true,borderWidth:1,data:[],yAxisID:'y-axis-1',},]},options:{legend:{display:true},aspectRatio:8,title:{display:false,text:'BitMEX Future Premium'},scales:{xAxes:[{type:'time',stacked:false,time:{displayFormats:{day:'M/D',hour:'M/D k:mm',second:'k:mm:ss',minute:'k:mm',},tooltipFormat:'M/D k:mm',},gridLines:{display:true,drawBorder:false,drawTicks:false},ticks:{display:false,padding:10,}}],yAxes:[{id:'y-axis-1',position:'left',scaleLabel:{display:true,labelString:'Premium ($)'},stacked:false,ticks:{padding:10,fontColor:'#1A1A1A',display:true,},gridLines:{display:true,drawBorder:false,},afterFit:function(scale){scale.width=100},},{id:'y-axis-2',position:'right',scaleLabel:{display:false,labelString:'ETHUSD'},stacked:false,ticks:{padding:10,fontColor:'#1951AE',display:false},gridLines:{display:false,drawBorder:false,drawTicks:false},afterFit:function(scale){scale.width=100},},]},tooltips:{mode:'nearest',intersect:false,callbacks:{label:function(tooltipItem,data){let label_y=tooltipItem.yLabel.toLocaleString();let label_title=data.datasets[tooltipItem.datasetIndex].label;switch(tooltipItem.datasetIndex){case 0:label_title='XBTUSD';break;case 1:label_title='XBTU19';break;case 2:label_title='XBTZ19';break;default:break}return label_title+": $"+label_y}}},hover:{mode:'nearest',intersect:false,animationDuration:0},animation:{duration:0},responsiveAnimationDuration:0,plugins:{streaming:false,zoom:{pan:{enabled:true,mode:'x',},zoom:{enabled:true,drag:false,mode:'x',speed:0.1,}}}}};
</script>
</body>
</html>